(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[12],{621:function(e,t,c){"use strict";t.a="http://localhost:81"},731:function(e,t,c){"use strict";c.r(t);var a=c(164),n=c(159),s=c(160),i=c(162),o=c(161),l=c(20),r=c(1),d=c.n(r),j=c(632),h=c(636),b=c.n(h),u=c(622),p=c.n(u),m=c(621),x=c(620),O={headers:{"content-type":"multipart/form-data",Accept:"*"}},g=function(e){Object(i.a)(c,e);var t=Object(o.a)(c);function c(e){var a;Object(n.a)(this,c),(a=t.call(this,e)).handleChange=function(e){a.setState(e)},a.submitHandler=function(e){if(e.preventDefault(),""!=a.state.category_id){var t=[],c=new FormData;c.append("file",a.state.file),""!=a.state.file?p.a.post("".concat(m.a,"/api/v1/upload"),c,O).then((function(e){a.setState({file:e.data.filename}),t={title:a.state.title,barcode:a.state.barcode,thumbnail:a.state.file,description:a.state.description,body:a.state.body,category_id:a.state.category_id},p.a.post("".concat(m.a,"/api/v1/post"),t).then((function(){window.location.href="".concat(window.origin,"/#/post")})).catch((function(e){return console.log(e)}))})):(t={title:a.state.title,barcode:a.state.barcode,description:a.state.description,body:a.state.body,category_id:a.state.category_id},p.a.post("".concat(m.a,"/api/v1/post"),t).then((function(){window.location.href="".concat(window.origin,"/#/post")})).catch((function(e){return console.log(e)})))}else a.setState({hidden:!1})};var s=localStorage.getItem("uuid");return""!=s&&void 0!=s||(window.location.href="".concat(window.origin,"/#/login")),a.state={id:e.id,handleWYSIWYGInput:e.handleWYSIWYGInput,editor:b.a,title:"",barcode:"",file:[],description:"",body:"",url:"avatars/no_image.png",category_id:"",category:"",categoryOption:[],tagOption:[],hidden:!0},a}return Object(s.a)(c,[{key:"handleUploadChange",value:function(e){this.setState({file:e.target.files[0],url:URL.createObjectURL(e.target.files[0])})}},{key:"componentDidMount",value:function(){var e=this;p.a.get("".concat(m.a,"/api/v1/category")).then((function(t){e.setState({categoryOption:t.data.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e,t=this;return Object(l.jsx)(x.f,{children:Object(l.jsx)(x.g,{children:Object(l.jsxs)(x.u,{onSubmit:this.submitHandler,children:[Object(l.jsxs)(x.N,{children:[Object(l.jsxs)(x.k,{className:"col-md-8 xs-8",children:[Object(l.jsx)(x.N,{children:Object(l.jsx)(x.k,{className:"md-12 xs-12",children:Object(l.jsxs)(x.v,{children:[Object(l.jsxs)(x.H,{children:["Post Name ",Object(l.jsx)("span",{className:"text-danger",children:"*"})]}),Object(l.jsx)(x.C,{className:"form-control",placeholder:"Enter Post Name",name:"title",onChange:function(e){return t.handleChange({title:e.target.value})}})]})})}),Object(l.jsx)(x.N,{children:Object(l.jsx)(x.k,{className:"md-12 xs-12",children:Object(l.jsxs)(x.v,{children:[Object(l.jsx)(x.H,{children:"Post Code "}),Object(l.jsx)(x.C,{className:"form-control",placeholder:"Enter Post Code",name:"barcode",onChange:function(e){return t.handleChange({barcode:e.target.value})}})]})})}),Object(l.jsx)(x.N,{children:Object(l.jsx)(x.k,{className:"md-12 xs-12",children:Object(l.jsxs)(x.v,{children:[Object(l.jsx)(x.H,{children:"Description "}),Object(l.jsx)(x.ab,{className:"form-control",placeholder:"Enter Description",name:"description",rows:"6",cols:"4",onChange:function(e){return t.handleChange({description:e.target.value})}})]})})}),Object(l.jsx)(x.N,{children:Object(l.jsx)(x.k,{className:"md-12 xs-12",children:Object(l.jsxs)(x.v,{children:[Object(l.jsx)(x.H,{children:"Content"}),Object(l.jsx)(j.CKEditor,{editor:b.a,data:this.state.body,config:{ckfinder:{uploadUrl:"".concat(m.a,"/api/v1/uploader")}},onChange:function(e,c){var a=c.getData();t.setState({body:a})}})]})})})]}),Object(l.jsx)(x.k,{className:"col-md-4 col-xs-4",children:Object(l.jsx)(x.f,{children:Object(l.jsxs)(x.g,{children:[Object(l.jsxs)(x.f,{children:[Object(l.jsx)(x.g,{children:Object(l.jsx)(x.N,{children:Object(l.jsx)(x.k,{className:"md-12 xs-12",children:Object(l.jsx)(x.v,{children:Object(l.jsx)("img",{src:"".concat(this.state.url),alt:"logo",className:"img-fluid"})})})})}),Object(l.jsx)(x.h,{children:Object(l.jsx)(x.N,{children:Object(l.jsx)(x.k,{className:"md-12 xs-12",children:Object(l.jsx)(x.v,{children:Object(l.jsxs)("div",{className:"input-group mb-3",children:[Object(l.jsx)("div",{className:"input-group-prepend",children:Object(l.jsx)("span",{className:"input-group-text",children:"Upload"})}),Object(l.jsxs)("div",{className:"custom-file",children:[Object(l.jsx)("input",(e={type:"file",className:"custom-file-input",id:"inputGroupFile01",name:"image"},Object(a.a)(e,"type","file"),Object(a.a)(e,"className","custom-file-input"),Object(a.a)(e,"onChange",(function(e){return t.handleUploadChange(e)})),e)),Object(l.jsx)("label",{className:"custom-file-label",for:"inputGroupFile01",children:"Choose Image"})]})]})})})})})]}),Object(l.jsx)(x.N,{children:Object(l.jsx)(x.k,{className:"md-12 xs-12",children:Object(l.jsxs)(x.v,{children:[Object(l.jsxs)(x.H,{children:["Menu Post ",Object(l.jsx)("span",{className:"text-danger",children:"*"})]}),Object(l.jsxs)(x.O,{name:"category_id",onChange:function(e){return t.handleChange({category_id:e.target.value})},children:[Object(l.jsx)("option",{value:"0",children:"Please select option"}),this.state.categoryOption.map((function(e){return Object(l.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(l.jsx)("small",{hidden:this.state.hidden,style:{color:"red"},children:"Please select one"})]})})})]})})})]}),Object(l.jsx)(x.N,{children:Object(l.jsx)(x.k,{className:"md-12 xs-12",children:Object(l.jsxs)(x.v,{children:[Object(l.jsx)(x.e,{type:"submit",className:"float-right",children:"Public"}),Object(l.jsx)(x.e,{to:"/post",className:"float-right",children:"Cancel"})]})})})]})})})}}]),c}(d.a.Component);t.default=g}}]);
//# sourceMappingURL=12.be4d7dd1.chunk.js.map